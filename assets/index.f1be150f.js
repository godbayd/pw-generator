var m=Object.defineProperty;var w=(n,e,t)=>e in n?m(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var o=(n,e,t)=>(w(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();class u{constructor(e,t){o(this,"handleChange",this.handleChange.bind(this));o(this,"handleFinalize",this.handleFinalize.bind(this));this.app=e,this.name=t,this.setMethodKey={minDigits:"setMinDigits",minSpecials:"setMinSpecials",pwLength:"setPwLength"}[this.name],this.$input=document.querySelector(`input[name="${this.name}"]`)}init(){this.$input.addEventListener("change",this.handleChange),this.$input.addEventListener("blur",this.handleFinalize),this.$input.addEventListener("keyup",this.handleFinalize)}handleChange(e){e.preventDefault(),console.log("on change");const{valueAsNumber:t}=e.currentTarget;Math.abs(t-this.app.state[this.name])===1&&this.app[this.setMethodKey](t)}handleFinalize(e){if(e.preventDefault(),console.log("handleFinalize"),e.key&&e.key!=="Enter")return;const{valueAsNumber:t}=e.currentTarget;this.app.state[this.name]!==t&&this.app[this.setMethodKey](t)}updateValue(e){const t=e[this.name];this.$input.value=t}}var b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},p={};(function(n){(function(e){function t(a){for(var i=a.length,s,r;i!==0;)r=Math.floor(Math.random()*i),i-=1,s=a[i],a[i]=a[r],a[r]=s;return a}e.knuthShuffle=t})(n||typeof window<"u"&&window||b)})(p);function L(n){return()=>p.knuthShuffle(y(n)).map(e=>e()).join("")}function y(n){const e=g(n),t=M(n.avoidAmbiguous),a=Object.keys(e).map(r=>{const h=e[r];return new Array(h).fill(()=>t[r][c(0,t[r].length-1)],0,h)}).flat(),i=d(n);if(i>=n.pwLength)return a;const s=C(n,t,e,i);return[...a,...s]}function C(n,e,t,a){const i=[],s=Object.keys(t);for(let r=a;r<n.pwLength;r++){const h=s[c(0,s.length-1)],l=e[h],f=l[c(0,l.length-1)];i.push(()=>f)}return i}function d(n){return Object.values(g(n)).reduce((e,t)=>e+t,0)}function g(n){return{...n.specials?{specials:Math.max(1,n.minSpecials)}:{},...n.digits?{digits:Math.max(1,n.minDigits)}:{},...n.uppercase?{uppercase:1}:{},...n.lowercase?{lowercase:1}:{}}}function M(n){const e="OlI01",t="abcdefghijklmnopqrstuvwxyz",a={digits:"0123456789",specials:"!@#$%^&*",lowercase:t,uppercase:t.toUpperCase()};return n?Object.entries(a).reduce((i,[s,r])=>{const h=Array.from(r).filter(l=>!e.includes(l)).join("");return{...i,[s]:h}},{}):a}function c(n,e){return n=Math.ceil(n),e=Math.floor(e),Math.floor(Math.random()*(e-n+1)+n)}class S{constructor(e){o(this,"$display",document.querySelector(".password"));this.app=e}render(){const e=L(this.app.state)();this.$display.innerText=e}}class P{constructor(e,t){o(this,"handleChange",this.handleChange.bind(this));this.app=e,this.name=t,this.$input=document.querySelector(`input[name="${this.name}"]`)}handleChange(e){this.app.setToggleState(this.name,e.currentTarget.checked),console.log(this.app.state)}init(){this.$input.addEventListener("change",this.handleChange)}}class v{constructor(){o(this,"pwLengthInput",new u(this,"pwLength"));o(this,"minSpecialsInput",new u(this,"minSpecials"));o(this,"minDigitsInput",new u(this,"minDigits"));o(this,"passwordH2",new S(this));o(this,"bounds",{minDigits:{min:0,max:9},minSpecials:{min:0,max:9},pwLength:{min:5,max:128}});o(this,"state",{avoidAmbiguous:!1,digits:!0,lowercase:!0,minDigits:0,minSpecials:0,pwLength:5,specials:!0,uppercase:!0})}init(){this.minDigitsInput.init(),this.minSpecialsInput.init(),this.pwLengthInput.init(),this.initializeToggleInputs(),this.renderPassword()}setToggleState(e,t){this.state[e]=t,this.adjustPwLength(),this.renderPassword(this.state)}initializeToggleInputs(){const e=["avoidAmbiguous","digits","lowercase","specials","uppercase"];for(const t of e)new P(this,t).init()}renderPassword(){this.passwordH2.render()}setPwLength(e){e<=this.bounds.pwLength.max&&e>=this.bounds.pwLength.min&&(this.state.pwLength=e,this.renderPassword())}adjustPwLength(){d(this.state)>=this.state.pwLength&&(this.state.pwLength+=1,this.pwLengthInput.updateValue(this.state))}setMinDigits(e){return this.setMin("minDigits",e)}setMinSpecials(e){return this.setMin("minSpecials",e)}setMin(e,t){t<=this.bounds[e].max&&t>=this.bounds[e].min&&(t>this.state[e]&&this.adjustPwLength(),this.state[e]=t,this.renderPassword())}}window.onload=n=>{new v().init()};
